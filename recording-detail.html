<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>VoiceInsight â€” Recording Details</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: { 50:'#f0f4ff', 100:'#dce8ff', 500:'#4169e1', 600:'#3457c8', 700:'#2a45a8' }
          }
        }
      }
    }
  </script>
  <style>
    body {
      background: #e5e7eb;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    #app {
      width: 100%;
      max-width: 390px;
      height: 100vh;
      background: #f9fafb;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 0 40px rgba(0,0,0,0.18);
    }
    @media (max-width: 390px) {
      #app { box-shadow: none; }
      body { background: #f9fafb; }
    }
    #content-scroll { flex: 1; overflow-y: auto; -webkit-overflow-scrolling: touch; }
    #content-scroll::-webkit-scrollbar { display: none; }
    .tab-button { transition: all 0.2s; }
    .tab-button.active { border-bottom-color: #4169e1; color: #4169e1; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .transcript-text { font-family: 'Menlo', 'Monaco', monospace; }
  </style>
</head>
<body>
<div id="app">

  <!-- Status bar spacer -->
  <div class="h-10 bg-white flex-shrink-0"></div>

  <!-- Header -->
  <div class="bg-white border-b border-gray-100 px-4 py-4 flex-shrink-0">
    <div class="flex items-center justify-between mb-3">
      <a href="dashboard.html" class="flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
        </svg>
      </a>
      <a href="settings.html" class="flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
        </svg>
      </a>
    </div>
    <h1 id="recording-title" class="text-lg font-bold text-gray-800 mb-1">Recording Title</h1>
    <p id="recording-meta" class="text-xs text-gray-400">Date Â· Duration</p>
  </div>

  <!-- Audio Player -->
  <div class="bg-white border-b border-gray-100 px-6 py-6 flex-shrink-0">
    <div class="flex flex-col items-center">
      <!-- Play Button -->
      <button id="play-btn" onclick="togglePlayback()"
        class="flex items-center justify-center w-16 h-16 rounded-full bg-brand-500 text-white shadow-lg active:scale-95 transition-transform mb-4">
        <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z"/>
        </svg>
      </button>

      <!-- Progress Bar -->
      <div class="w-full mt-4">
        <input id="progress-bar" type="range" min="0" max="100" value="0"
          class="w-full h-1 bg-gray-200 rounded-full appearance-none cursor-pointer"
          style="background: linear-gradient(to right, #4169e1 0%, #4169e1 0%, #e5e7eb 0%, #e5e7eb 100%);"
          oninput="updateProgressBackground(this)">
      </div>

      <!-- Time display -->
      <div class="flex justify-between w-full mt-2 text-xs text-gray-500">
        <span id="current-time">0:00</span>
        <span id="total-time">2:45</span>
      </div>

      <!-- Playback speed -->
      <div class="flex gap-2 mt-4">
        <button onclick="setPlaybackSpeed(0.75)" class="px-3 py-1 text-xs border border-gray-200 rounded-full hover:bg-gray-50">0.75x</button>
        <button onclick="setPlaybackSpeed(1)" class="px-3 py-1 text-xs border border-brand-500 bg-brand-50 text-brand-600 rounded-full font-medium">1x</button>
        <button onclick="setPlaybackSpeed(1.25)" class="px-3 py-1 text-xs border border-gray-200 rounded-full hover:bg-gray-50">1.25x</button>
        <button onclick="setPlaybackSpeed(1.5)" class="px-3 py-1 text-xs border border-gray-200 rounded-full hover:bg-gray-50">1.5x</button>
      </div>
    </div>
  </div>

  <!-- Tab Navigation -->
  <div class="bg-white border-b border-gray-100 flex-shrink-0 flex items-center px-4">
    <button onclick="switchTab('transcript')" class="tab-button active flex-1 py-3 text-sm font-medium border-b-2 border-brand-500 text-brand-600">
      Transcript
    </button>
    <button onclick="switchTab('summary')" class="tab-button flex-1 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500">
      Summary
    </button>
    <button onclick="switchTab('keypoints')" class="tab-button flex-1 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500">
      Key Points
    </button>
  </div>

  <!-- Tab Content -->
  <div id="content-scroll">

    <!-- Transcript Tab -->
    <div id="transcript" class="tab-content active px-4 py-4 pb-24">
      <div class="bg-white border border-gray-200 rounded-lg p-4 mb-4">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-sm font-semibold text-gray-800">Transcript</h3>
          <button onclick="copyContent('transcript-text')" class="text-xs text-brand-500 font-medium">Copy</button>
        </div>
        <div id="transcript-text" class="transcript-text text-xs text-gray-800 leading-relaxed space-y-3">
          <p><span class="text-brand-600 font-medium">[0:00] Speaker 1:</span><br>Good morning everyone. Thank you all for joining today's meeting. I want to discuss the Q1 results and our budget planning for Q2.</p>
          <p><span class="text-brand-600 font-medium">[0:15] Speaker 2:</span><br>Thanks for having me. I'm looking forward to this discussion, particularly the budget allocation portion.</p>
          <p><span class="text-brand-600 font-medium">[0:25] Speaker 1:</span><br>Great. Let me start by sharing the Q1 financial results. We exceeded our targets by twelve percent, which is a significant achievement.</p>
          <p><span class="text-brand-600 font-medium">[0:42] Speaker 3:</span><br>That's excellent news. How does this compare to our projections?</p>
          <p><span class="text-brand-600 font-medium">[0:50] Speaker 1:</span><br>We beat our projections by approximately eight percent. The sales team did an outstanding job.</p>
        </div>
      </div>
    </div>

    <!-- Summary Tab -->
    <div id="summary" class="tab-content px-4 py-4 pb-24">
      <div class="bg-white border border-gray-200 rounded-lg p-4">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-sm font-semibold text-gray-800">Summary</h3>
          <button onclick="copyContent('summary-text')" class="text-xs text-brand-500 font-medium">Copy</button>
        </div>
        <div id="summary-text" class="text-sm text-gray-700 leading-relaxed space-y-3">
          <p>This meeting covered the Q1 financial results and budget planning for Q2. The team discussed how the company exceeded its Q1 targets by 12%, representing an 8% improvement over initial projections. The sales team received particular recognition for their strong performance.</p>
          <p>The discussion included budget allocation for new tools and initiatives, team expansion plans for March, and approval processes for Q2 expenditures. The team reviewed financial metrics and set targets for the upcoming quarter.</p>
          <p>Next steps include following up on action items, scheduling a dedicated Q2 planning session, and distributing the detailed budget spreadsheet to the finance department for formal processing.</p>
        </div>
      </div>
    </div>

    <!-- Key Points Tab -->
    <div id="keypoints" class="tab-content px-4 py-4 pb-24">
      <div class="bg-white border border-gray-200 rounded-lg p-4">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-sm font-semibold text-gray-800">Key Points</h3>
          <button onclick="copyContent('keypoints-text')" class="text-xs text-brand-500 font-medium">Copy</button>
        </div>
        <div id="keypoints-text" class="space-y-3">
          <div class="flex gap-3 pb-3 border-b border-gray-100">
            <span class="text-base flex-shrink-0">âš¡</span>
            <div>
              <p class="text-sm font-medium text-gray-800">Action Items</p>
              <ul class="text-xs text-gray-600 mt-2 space-y-1 ml-1">
                <li>â€¢ Follow up with marketing team by Friday</li>
                <li>â€¢ Schedule Q2 planning session</li>
                <li>â€¢ Send budget spreadsheet to finance</li>
              </ul>
            </div>
          </div>
          <div class="flex gap-3 pb-3 border-b border-gray-100">
            <span class="text-base flex-shrink-0">ðŸŽ¯</span>
            <div>
              <p class="text-sm font-medium text-gray-800">Key Topics</p>
              <ul class="text-xs text-gray-600 mt-2 space-y-1 ml-1">
                <li>â€¢ Q1 results exceeded targets by 12%</li>
                <li>â€¢ 8% improvement over initial projections</li>
                <li>â€¢ Sales team recognition for strong performance</li>
              </ul>
            </div>
          </div>
          <div class="flex gap-3">
            <span class="text-base flex-shrink-0">âœ…</span>
            <div>
              <p class="text-sm font-medium text-gray-800">Decisions Made</p>
              <ul class="text-xs text-gray-600 mt-2 space-y-1 ml-1">
                <li>â€¢ Budget allocated for new tools</li>
                <li>â€¢ Team expansion approved for March</li>
                <li>â€¢ Q2 expenditure framework approved</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Bottom Actions -->
  <div class="absolute bottom-0 left-0 right-0 bg-white border-t border-gray-100 px-4 py-3 pb-8 flex gap-2">
    <button onclick="editTitle()" class="flex items-center justify-center w-10 h-10 rounded-full hover:bg-gray-100">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
      </svg>
    </button>
    <button onclick="shareRecording()" class="flex items-center justify-center w-10 h-10 rounded-full hover:bg-gray-100">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
      </svg>
    </button>
    <button onclick="deleteRecording()" class="flex items-center justify-center w-10 h-10 rounded-full hover:bg-red-50">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
      </svg>
    </button>
  </div>

</div>

<script>
  // Get recording from URL parameters or sessionStorage
  const params = new URLSearchParams(window.location.search);
  const recordingId = params.get('id');
  let recording = null;

  if (recordingId) {
    const stored = sessionStorage.getItem(recordingId);
    if (stored) {
      recording = JSON.parse(stored);
    }
  }

  // Fallback mock data
  if (!recording) {
    recording = {
      id: 'mock-rec',
      title: 'Team Standup - Feb 24',
      duration: 165,
      date: 'Today, 2:34 PM',
      audioUrl: ''
    };
  }

  // Format duration
  function formatTime(seconds) {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins}:${String(secs).padStart(2, '0')}`;
  }

  // Update page with recording data
  document.getElementById('recording-title').textContent = recording.title;
  document.getElementById('recording-meta').textContent = `${recording.date} Â· ${formatTime(recording.duration)}`;
  document.getElementById('total-time').textContent = formatTime(recording.duration);

  // Tab switching
  function switchTab(tabName) {
    // Hide all tabs
    document.querySelectorAll('.tab-content').forEach(el => {
      el.classList.remove('active');
    });

    // Remove active class from all buttons
    document.querySelectorAll('.tab-button').forEach(btn => {
      btn.classList.remove('active');
      btn.style.borderBottomColor = 'transparent';
      btn.style.color = '#6b7280';
    });

    // Show selected tab
    document.getElementById(tabName).classList.add('active');

    // Mark button as active
    event.target.classList.add('active');
    event.target.style.borderBottomColor = '#4169e1';
    event.target.style.color = '#4169e1';
  }

  // Playback controls
  let isPlaying = false;
  const playBtn = document.getElementById('play-btn');
  const playIcon = document.getElementById('play-icon');

  function togglePlayback() {
    if (isPlaying) {
      isPlaying = false;
      playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
    } else {
      isPlaying = true;
      playIcon.innerHTML = '<path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>';
      // Simulate playback
      simulatePlayback();
    }
  }

  function simulatePlayback() {
    const progressBar = document.getElementById('progress-bar');
    const currentTimeEl = document.getElementById('current-time');
    const totalSeconds = recording.duration;
    let currentSeconds = parseInt(progressBar.value);

    const interval = setInterval(() => {
      if (!isPlaying || currentSeconds >= totalSeconds) {
        clearInterval(interval);
        isPlaying = false;
        playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
        return;
      }

      currentSeconds++;
      progressBar.value = (currentSeconds / totalSeconds) * 100;
      currentTimeEl.textContent = formatTime(currentSeconds);
      updateProgressBackground(progressBar);
    }, 1000);
  }

  function updateProgressBackground(input) {
    const percentage = (input.value / input.max) * 100;
    input.style.background = `linear-gradient(to right, #4169e1 0%, #4169e1 ${percentage}%, #e5e7eb ${percentage}%, #e5e7eb 100%)`;
  }

  function setPlaybackSpeed(speed) {
    // Update button styles
    document.querySelectorAll('button').forEach(btn => {
      if (btn.textContent.includes('x')) {
        btn.classList.remove('border-brand-500', 'bg-brand-50', 'text-brand-600', 'font-medium');
        btn.classList.add('border-gray-200');
      }
    });

    event.target.classList.remove('border-gray-200');
    event.target.classList.add('border-brand-500', 'bg-brand-50', 'text-brand-600', 'font-medium');
  }

  // Copy functionality
  function copyContent(elementId) {
    const text = document.getElementById(elementId).innerText;
    navigator.clipboard.writeText(text).then(() => {
      const originalText = event.target.textContent;
      event.target.textContent = 'Copied!';
      setTimeout(() => {
        event.target.textContent = originalText;
      }, 2000);
    });
  }

  // Action buttons
  function editTitle() {
    const newTitle = prompt('Edit title:', recording.title);
    if (newTitle) {
      recording.title = newTitle;
      document.getElementById('recording-title').textContent = newTitle;
      sessionStorage.setItem(recording.id, JSON.stringify(recording));
    }
  }

  function shareRecording() {
    alert('Share functionality would open native share menu with:\n\n' + recording.title + '\n\nDuration: ' + formatTime(recording.duration));
  }

  function deleteRecording() {
    if (confirm('Delete this recording? This cannot be undone.')) {
      sessionStorage.removeItem(recording.id);
      window.location.href = 'dashboard.html';
    }
  }
</script>
</body>
</html>
